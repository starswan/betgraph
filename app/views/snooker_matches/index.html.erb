<!-- $Id$ -->
<h4>Matches for <%= link_to @division.name, @division %></h4>
<table class="table table-striped table-responsive">
   <% direction = @direction == 'desc' ? :asc : :desc %>
   <tr><td><%= link_to_if((@offset and @offset >= @limit), '<<', :order => @order, :direction => params[:direction], :offset => @offset ? @offset - @limit : 0, :limit => @limit) %></th>
       <th>Hometeam</th>
       <th>Awayteam</th>
       <th>Markets</th>
       <th><%= link_to 'Kickofftime', :order => :kickofftime, :direction => @order == 'kickofftime' ? direction : 'asc' %></th>
       <th colspan="2">Actions</th>
       <td align="right"><%= link_to '>>',  :order => @order, :direction => params[:direction], :offset => @offset ? @offset + @limit : 0, :limit => @limit %></th>
   </tr>

<% @matches.each_with_index do |match, offset| %>
  <tr id="<%= match.id %>">
    <td>&nbsp;</td>
    <td><%=h match.hometeam.teamname %></td>
    <td><%=h match.awayteam.teamname %></td>
    <td align="right"><%= link_to match.bet_markets_count, match_bet_markets_path(match) %></td>
    <td><%= link_to match.kickofftime.to_s(:kickoff).html_safe, polymorphic_url(match, order: "#{@order} #{direction}", offset: @offset + offset) %></td>
    <td><%= link_to 'Edit', polymorphic_url(match, :action => :edit), :class => 'btn btn-sm btn-outline-primary' %></td>
    <td>
       <%= link_to 'Delete',
                   match,
                   :remote => true,
                   :data => { :confirm => "Are you sure you want to delete #{match.name}?" },
                   :method => :delete,
                   :class => 'delete-match btn btn-sm btn-outline-danger' %>
    </td>
  </tr>
<% end %>
</table>

<%= link_to 'New match', new_division_match_path(@division) %>
